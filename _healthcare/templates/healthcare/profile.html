{% extends "healthcare/template.html" %}

{% block content %}
 <section class="bg-light py-5">
    <div class="container">
        {% if session['appointment'] %}
        <script>$("#TransferAlertBox").fadeIn();</script>
        {% endif %}
        <div class="alert alert-primary alert-dismissible fade show" role="alert" id="TransferAlertBox" >
                <h5 class="alert-heading">MileagePlus Balance: 999,999,999 miles</h5>
                {{ session['appointment'] }}
        </div>
        <div class="row">
            <div class="col-md-6">
                <div class="card border-bottom">
                    <div class="card-header">Account</div>
                    <div class="card-body">
                          <form class="form-horizontal" action='updateuserinfo' method="POST">
                              <div class="form-group input-group">
                             	  <div class="input-group-prepend">
                            		  <span class="input-group-text"> <i class="fa fa-user"></i> </span>
                            		</div>
                            	  <input name="firstname" class="form-control" id="firstname" placeholder="First Name" type="text" value="{{ user_info2['profile']['firstName'] }}">
                              </div>

                              <div class="form-group input-group">
                                <div class="input-group-prepend">
                          		    <span class="input-group-text"> <i class="fa fa-user"></i> </span>
                          		  </div>
                                <input name="lastname" class="form-control" id="lastname" placeholder="Last Name" type="text" value="{{ user_info2['profile']['lastName']  }}">
                              </div>

                              <div class="form-group input-group">
                              	<div class="input-group-prepend">
                          		    <span class="input-group-text"> <i class="fa fa-envelope"></i> </span>
                          		  </div>
                                <input name="email" class="form-control" id="email" placeholder="Email address" type="email" value="{{ user_info2['profile']['email']  }}">
                              </div>

                              <div class="form-group input-group">
                              	<div class="input-group-prepend">
                          		    <span class="input-group-text"> <i class="fa fa-phone"></i> </span>
                          		  </div>
                          			<input name="mobilePhone" id="mobilePhone" class="form-control" placeholder="Mobile Phone" type="text" value="{{ user_info2['profile']['mobilePhone']  }}">
                              </div>

                              <div class="form-group input-group">
                              	<div class="input-group-prepend">
                          		    <span class="input-group-text"> <i class="fa fa-id-card"></i> </span>
                          		  </div>
                          			<input name="patientid" id="patientid" class="form-control" type="text" value="{{ patientid  }}" disabled>&nbsp;&nbsp;
                          			<button type="button" onclick="showidcard()" class="btn btn-primary">&nbsp;Show ID Card&nbsp;</button>
                              </div>

                              <div class="form-group input-group">
                                    <div class="input-group-prepend">
                          		        <span class="input-group-text"> <i class="fa fa-check"></i> </span>
                                    </div>
                          			<input name="consent" id="consent" class="form-control" type="text" value="{{ consent }}" disabled>&nbsp;&nbsp;
                          			<button type="button" onclick="resetconsent()" class="btn btn-primary">Reset Consent</button>
                              </div>
                              <input name="nconsent" id="nconsent" class="form-control" type="hidden" value="{{ consent }}">
                              <input id="user_id" name="user_id" class="form-control" type="hidden" value="{{ user_info2['id'] }}">
                              <div class="form-group">
                              <button type="submit" class="btn btn-primary btn-block">Update Account</button>
                              </div>
                          </form>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card border-bottom">
                    <div class="card-header">Identity Verification</div>
                    <div class="card-body" >
                      {% include '//components/template-idverification.html' %}
                    </div>
                </div>
                <br>
                {% include '//components/template-mfaenrollment.html' %}
                {% if consent %}
                    {% include '//components/template-progressiveprofile.html' %}
                {% endif %}
            </div>
        </div>
    </div>
</section>

        <div class="modal fade" id="healthcard" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                    <div class="modal-header">
                        Your Health Insurance Card ID<button class="close" type="button" onclick="closeidcard" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
                    </div>
                    <div class="modal-body" id="mfamodalbody" style="text-align: center;">
                        <table border="0" style="border-collapse: collapse; width: 100%;">
                            <tbody>
                                <tr>
                                    <td style="width: 50%;"><img src="https://cdn-zartan.s3.us-east-2.amazonaws.com/static/img/health-insurance.png" alt="" width="300" height="166" /></td>
                                    <td style="width: 50%;">
                                        <p>Name: {{ user_info2['profile']['firstName'] }} {{ user_info2['profile']['lastName'] }} <br />ID: {{ patientid  }}</p>
                                        <hr>
                                        <p>Group#: GP10334<br />Effective Date: 1/1/2020</p>
                                        <p>Plan: Family PPO</p>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="width: 50%;">
                                        <hr>
                                        <p>RX: Yes<br />RXBin: 156456<br />RXPCN: 01945610000<br><br><br></p>
                                    </td>
                                    <td style="width: 50%;">
                                        <hr>
                                        <p><b>Copayment</b></p>
                                        <p>Primary Care: $15<br />Urgent Care: $15<br />Emergency Room: $100</p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
            </div>
        </div>
        </div>

        <div class="modal fade" id="consentModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalCenterTitle">Sign Up Now</h5><br>
                        </div>
                        <div class="modal-body" id="mfamodalbody">
                            <h1>MileagePlus Program Rules</h1><p>Important: The following are the rules and other provisions (collectively, "Rules") of the MileagePlus® program, which includes but is not limited to the accrual and redemption of miles, awards and benefits and Premier® and Million Miler benefits, (collectively, the "Program"). By enrolling or participating in the Program, you indicate your acceptance of these Rules and agree to abide by them. It is your responsibility to read and understand all of the Rules. For more information, contact the MileagePlus Service Center or visit the MileagePlus website at mileageplus.com. These Rules cannot be superseded or changed, except in writing from United Airlines or any of its affiliates (collectively, "United"). The most current Rules may be found on united.com and this is the final authority on the Rules. The Rules on united.com shall be deemed to supersede any prior or conflicting versions thereof.</p>
                                <p>General conditions</p>
                                <p>1. The Program is offered at the discretion of United and United has the right to terminate the Program, in whole or in part, or to change the Rules, benefits, conditions of participation, Premier (and/or Million Miler) qualification criteria or mileage levels, in whole or in part, at any time, with or without notice, even though changes may affect the value of Premier (and/or Million Miler) status levels, benefits, mileage or certificates already accumulated.
                                    United may, among other things, withdraw, limit, modify or cancel any award; increase the mileage, cash required, applicable co-pays or number of certificates required for any award; modify benefits associated with Premier (and/or Million Miler) status; modify Premier (and/or Million Miler) qualification criteria; modify or regulate the transferability of awards or benefits; add an unlimited number of blackout dates; or limit the number of award seats available to any or all destinations. Members of the Program ("Members"), in accumulating any benefits of any kind including but not limited to certificates, mileage, and (to the extent applicable) Premier qualifying dollars ("PQD"), Premier qualifying segments ("PQS"), Premier qualifying miles ("PQM"), Premier Qualifying Flights ("PQF") or Premier Qualifying Points("PQP," together with PQD, PQS, PQM, PQF or any future type of Premier qualification metric (each, to the extent applicable), "Premier Qualifying Credits"), may not rely upon the continued availability of (a) the benefits associated with a Premier (and/or Million Miler) status level or (b) an award or award level, and Members may not be able to obtain all offered benefits or awards or use awards to all destinations or on all flights. For the purpose of calculating Premier qualification requirements earned in 2020, or after, to qualify for Premier status with respect to the 2021 program year or after, the definition of "Premier Qualifying Credits" shall include PQP and PQF and any other Premier qualification metric United determines to use in its sole discretion. United reserves the right to make bonus and promotional offers by United or MileagePlus Partners selectively available to certain Members at any time, based on flight activity, Partner (defined below) activity, geographic locations, Premier status level, mileage accumulation, Program participation, or other factors determined at United's sole discretion. Mileage redemption activity (and processing of any mileage redemption requests for any awards, certificates or benefits, including without limitation any Premier (and/or Million Miler) status benefits, if applicable) may be prohibited in any MileagePlus account or suspended for a period of time after the opening of the MileagePlus account.</p>
                                <p>3. The practice utilizes a number of vendors in the conduct of business. These vendors may have access to PHI but must agree to abide by the confidentiality rules of HIPAA.</p>
                                <p>4. You understand and agree to inspections of the office and review of documents which may include PHI by government agencies or insurance payers in normal performance of their duties.</p>
                                <p>5. You agree to bring any concerns or complaints regarding privacy to the attention of the office manger or the doctor.</p>
                                <p>6. Your confidential information will not be used for the purposes of marketing or advertising of products, goods or services.</p>
                                <p>7. We agree to provide patients with access to their records in accordance with state and federal laws.</p>
                                <p>8. We may change, add, delete or modify any of these provisions to better serve the needs of the both the practice and the patient.</p>
                                <p>9. You have the right to request restrictions in the use of your protected health information and to request change in certain policies used within the office concerning your PHI. However, we are not obligated to alter internal policies to conform to your request.</p>
                        </div>
                        <div class="modal-footer">
                            <div  style="float: left;"><input type="checkbox" id="acceptterms" name="acceptterms" onclick="acceptterms()" value="Accept Terms"> &nbsp;&nbsp;I hereby consent and
                                acknowledge my agreement to the terms set forth in the HIPAA INFORMATION FORM and any
                                subsequent changes in office policy. I understand that this consent shall remain in force
                                from this time forward.
                            </div>&nbsp;&nbsp;&nbsp;
                            <button class="btn btn-primary" type="button" id="confirm"  onclick="acceptcompleted()" disabled>Confirm</button>
                            <button class="btn btn-primary" type="button" onclick="closepopup()">Cancel</button>
                        </div>
                </div>
            </div>
        </div>

    <script type="text/javascript">

        function showidcard(){
            console.log("showidcard()");
            $("#healthcard").modal("show");
        }
        function closeidcard() {
            console.log("closeidcard()");
            $("#healthcard").modal("hide");
        }

        window.addEventListener('load', function () {
            testconsent = '{{consent}}';
            console.log("check_consent()");
            console.log(testconsent);
            if (testconsent.trim() == '')
            {
                $("#consentModal").modal("show");
            }
        })

        function acceptcompleted() {
            console.log("acceptcompleted()");
            window.location = "/healthcare/acceptterms";
            $("#consentModal").modal("hide");
        }

        function closepopup() {
            console.log("closepopup()");
            $("#consentModal").modal("hide");
        }


        function acceptterms() {
                console.log("acceptterms()");
                if($("#acceptterms").prop("checked") == true)
                {
                    $("#confirm").prop('disabled', false);
                }
                else
                {
                    $("#confirm").prop('disabled', true);
                }
        }

        function resetconsent() {
                console.log("resetconsent()");
                $("#consent").val("");
                window.location = "/healthcare/clearconsent/{{user_info2['id']}}" ;
        }



    </script>

    <style>
        .modal-dialog {
            max-width: 800;
        }
    </style>

{% endblock %}

{% block footer %}
{% endblock %}